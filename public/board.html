<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="grid-container lists">
        <div class="header">
            <a id="back-container" href="homepage.html"><img width="40" height="40" src="https://www.flaticon.com/svg/static/icons/svg/553/553416.svg" id="back-btn">
                <span class="tooltiptext">Home</span></a>
            <h2 id="projectName" contenteditable="true">New Project</h2><img width="20" height="20" src="https://www.flaticon.com/svg/static/icons/svg/3616/3616796.svg" id="pencil">
        </div>
    
        <div class="controls">
            <section>
                <form onsubmit="return addButton(taskInput)">
                    <input id="task.value" name="taskInput" placeholder="Add a task" type="text"/>
                    <button type="submit">Add</button>
                </form>
            </section>
            <div class="save-container">
                 <button id="save-btn">Update Board</button>
            </div>
        </div>
        <div class="left list" id="section1">
            <h2 class="unselectable">To Do</h2>
        </div>

        <div class="middle list" id="section2">
            <h2 class="unselectable">Doing</h2>
            
        </div>  

        <div class="right list" id="section3">
            <h2 class="unselectable">Completed</h2>
        </div>
    </div>
    <script >
        const params = (new URL(document.location)).searchParams
        const id = params.get("id")
        console.log(id);
        const boards = JSON.parse(localStorage.getItem("boards") || "[]");
        const board = boards.find((board) => {
            return board.id == id
        })
        console.log(board)

        document.getElementById("projectName").innerHTML = board.title

        for (let i = 0; i < board.tasks.length; i++) {
            let taskDiv = document.createElement('div')
            if (board.tasks[i].status == 0) {
                document.getElementById("section1").appendChild(taskDiv)
            } else if (board.tasks[i].status == 1) {
                document.getElementById("section2").appendChild(taskDiv) 
            } else {
                document.getElementById("section3").appendChild(taskDiv)
            }
            taskDiv.setAttribute("id", `task${i+1}`);
            taskDiv.setAttribute("class", "list-item");
            taskDiv.setAttribute("draggable", "true");
                
            document.getElementById(`task${i+1}`).innerHTML += `
            <ul>
                ${board.tasks.slice(i, i+1).map(task => `<li>${board.tasks[i].text}</li>`).join("")}
            </ul>
            <img src="https://www.flaticon.com/svg/static/icons/svg/1168/1168643.svg" id="deleteButton" onclick="deleteButton(${i})" height="20px" width="20px">
            `  
        }
    </script>  
</body>
</html>











